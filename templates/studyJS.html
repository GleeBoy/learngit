<html>
<body>

<script language=javascript>		// type="text/javascript"

function studyScript(){

}

//权威指南 6-1  返回继承原型对象p的属性的新对象
function inherit(p){
	if (p == null) throw TypeError();
	if (Object.create)
		return Object.create(p);
	var t = typeof p;
	if (t !=='object' && t !== 'function') throw TypeError();
	function f() {};
	f.prototype = p;
	return new f();
}

// 9-1 工厂函数表示值范围的类
function range(from, to){
	var r = inherit(range.methods);
	r.from = from;
	r.to = to;
	return r;
}
range.methods = {
	includes: function(x){
		return this.from <= x && x <= this.to;
	},
	foreach: function(f){
		for (var x = Math.ceil(this.from); x <= this.to; x++) f(x); 	// 向上取整,参数f是函数
	},
	toString: function() {return "(" + this.from + "..." + this.to + ")";}
}
// var r = range(1, 3);	// 创建对象
// console.log(r.includes(2));			// => true；
// r.foreach(console.log); // 输出 1 2 3
// console.log(r);			// 输出(1...3)

// 9-2构造函数代替工厂函数，这里没有创建并返回对象，只是初始化
function Range(from, to){
	this.from = from;
	this.to = to;
}
Range.prototype = {		
	includes: function(x){
		return this.from <= x && x <= this.to;
	},
	foreach: function(f){
		for (var x = Math.ceil(this.from); x <= this.to; x++) f(x); 
	},
	toString: function() {return "(" + this.from + "..." + this.to + ")";}
}
// var r = new Range(1, 3);	// 必须new
// console.log(r.includes(2));			// => true；
// r.foreach(console.log); // 输出 1 2 3
// console.log(r);			// 输出(1...3)

// 9-2重新自定义了prototype，而没有constructor属性，显示修补
Range.prototype = {
	constructor: Range, // 显式设置构造函数反向引用
	includes: function(x){
		return this.from <= x && x <= this.to;
	},
	foreach: function(f){
		for (var x = Math.ceil(this.from); x <= this.to; x++) f(x); 
	},
	toString: function() {return "(" + this.from + "..." + this.to + ")";}

}
// 另一种方法使用预定义的prototype，依次给prototype添加方法
Range.prototype.includes = function(x){ return this.from <= x && x <= this.to;};
Range.prototype.foreach = function(f){
	for (var x = Math.ceil(this.from); x <= this.to; x++) f(x); 
};
Range.prototype.toString = function(){return "(" + this.from + "..." + this.to + ")";};


</script>
<button onclick="studyScript()">studyScript</button>
</body>
</html>